{% extends "layouts/main.html" %}

{% block pageTitle %}
  Participant – {{ session.title }} – {{ serviceName }}
{% endblock %}

{% block content %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">

    <h1 class="govuk-heading-l">{{ session.title }}</h1>

    <p class="govuk-body-l">
      Welcome to this Causality Garden session. Your facilitator will guide you through exploring the causes and connections.
    </p>

    {% if currentPrompt %}
      
      <div class="govuk-panel govuk-panel--confirmation" style="background-color: #1d70b8;">
        <h2 class="govuk-panel__title" style="font-size: 1.5rem;">
          Current question
        </h2>
        <div class="govuk-panel__body" style="font-size: 1.25rem;">
          {{ currentPrompt }}
        </div>
      </div>

      <form action="/session/{{ session.id }}/participant/respond" method="post" novalidate>
        
        <input type="hidden" name="nodeId" value="{{ currentNodeId }}">
        
        {{ govukTextarea({
          label: {
            text: "Your response",
            classes: "govuk-label--m"
          },
          hint: {
            text: "Take your time. There are no wrong answers."
          },
          id: "response",
          name: "response",
          rows: 5
        }) }}

        {{ govukButton({
          text: "Submit response"
        }) }}

      </form>

    {% else %}
      
      <p class="govuk-body">Waiting for the facilitator to provide a question...</p>
      
      <p class="govuk-body">
        <a href="/session/{{ session.id }}/participant" class="govuk-button govuk-button--secondary">Refresh</a>
      </p>

    {% endif %}

    <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

    <h2 class="govuk-heading-m">Your journey so far</h2>

    {% if recentNodes and recentNodes.length > 0 %}
      <ol class="govuk-list govuk-list--number">
        {% for node in recentNodes %}
        <li>{{ node.text }}</li>
        {% endfor %}
      </ol>
    {% else %}
      <p class="govuk-body">You haven't added any responses yet.</p>
    {% endif %}

  </div>

  <div class="govuk-grid-column-one-third">
    <aside class="govuk-prototype-kit-common-templates-related-items" role="complementary">
      <h2 class="govuk-heading-s">
        Session phase
      </h2>
      <p class="govuk-body-s">
        <strong class="govuk-tag">{{ session.phase | capitalize }}</strong>
      </p>
      
      <h2 class="govuk-heading-s">
        Tips
      </h2>
      <ul class="govuk-list govuk-!-font-size-16">
        <li>Be specific rather than general</li>
        <li>One idea per response</li>
        <li>It's okay to say "I don't know why"</li>
        <li>Focus on what feels true for you</li>
      </ul>
    </aside>
  </div>
</div>

{% endblock %}
